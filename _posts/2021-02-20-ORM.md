---
title: "Streamlined ORM - Objection and Knex.js "
layout: post
---

Object-Relational-Mapping (ORM) is how you apply the object oriented paradigm to querying a database. It can be described as a technique to interact with any database using an object of a programming language of your choice - the DB layer is abstracted and you're not writing SQL anymore. So when people say they're using "*an ORM*", it usually means a library that implements this technique. 

I recently came across *an ORM* for Node JS called Objection. It is a `relational query builder` that runs on top of `Knex js` - A SQL query builder. Knex works at the lower level and deals with setting up the database connection and adding seed data to it whilst Objection lets you create data models as ES6 classes and write queries in Javascript. 

---

## Initial Setup
Set up npm in a directory. 
```linux 
npm init -y
```

Install objection, knex and pg
```linux
npm install objection pg
```
and 
```linux
npm install -g knex
```
*Installing knex globally allows us to write knex commands without `npx`*


In this post I'll be using ES6 modules. To enable `esm` go to `package.json` and add `type: "module"` to the existing structure. That would allow only ES6 module import/export syntax globally. 

create a `db` folder and an `app.js` file that will hold our express app. To set up Knex, we need a config file called `knexfile.js`. To create this file simply do 
```linux
knex --esm init
```
*The `esm` tag is to enable ES6 modules*

